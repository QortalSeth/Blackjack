{"version":3,"file":"Hand.js","sourceRoot":"","sources":["../../TypeScript/Models/Hand.ts"],"names":[],"mappings":";;;IAGA,MAAa,IAAI;QAUb,YAAoB,GAAW,EAAS,KAAa;YAAjC,QAAG,GAAH,GAAG,CAAQ;YAAS,UAAK,GAAL,KAAK,CAAQ;YACjD,IAAI,CAAC,KAAK,GAAG,EAAE,CAAA;YACf,IAAI,CAAC,KAAK,GAAG,EAAE,CAAA;YACf,IAAI,CAAC,MAAM,GAAG,KAAK,CAAA;YACnB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAA;YACtB,IAAI,CAAC,SAAS,GAAG,CAAC,CAAA;QACtB,CAAC;QAED,eAAe,CAAE,IAAU;YACvB,IAAI,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,EAAE,CAAA;YAChC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAA;YAC1B,IAAI,CAAC,cAAc,EAAE,CAAA;YACrB,OAAO,SAAS,CAAA;QACpB,CAAC;QAED,eAAe,CAAE,SAAe;YAC5B,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAA;YAC1B,IAAI,CAAC,cAAc,EAAE,CAAA;YACrB,OAAO,SAAS,CAAA;QACpB,CAAC;QAEO,cAAc;YAClB,IAAI,CAAC,KAAK,GAAG,EAAE,CAAA;YACf,IAAI,SAAS,GAAG,CAAC,CAAA;YACjB,IAAI,IAAI,GAAG,CAAC,CAAA;YACZ,KAAK,IAAI,IAAI,IAAI,IAAI,CAAC,KAAK,EAAE;gBACzB,SAAS,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAA;gBAC5B,IAAI,IAAI,CAAC,IAAI,KAAK,KAAK,EAAE;oBACrB,IAAI,EAAE,CAAA;iBACT;aACJ;YAED,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAA;YAC1B,OAAO,IAAI,EAAE,GAAG,CAAC,EAAE;gBACf,SAAS,IAAI,EAAE,CAAA;gBACf,IAAI,SAAS,IAAI,EAAE,EAAE;oBACjB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAA;iBAC7B;aAEJ;QACL,CAAC;QAED,YAAY;YACR,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;gBACvB,IAAI,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAA;gBAC7B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;oBACxC,IAAI,IAAI,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAA;iBACjC;gBACD,OAAO,IAAI,CAAA;aACd;;gBACI,OAAO,GAAG,CAAA;QACnB,CAAC;QAED,eAAe;YACX,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;gBAEvB,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;gBAEvB,KAAK,IAAI,KAAK,IAAI,IAAI,CAAC,KAAK,EAAE;oBAC1B,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,CAAC,CAAA;iBAC7B;gBACD,OAAO,GAAG,CAAA;aACb;YACD,OAAO,CAAC,CAAA;QACZ,CAAC;QAED,cAAc;YACV,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;gBACvB,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;gBAEvB,KAAK,IAAI,KAAK,IAAI,IAAI,CAAC,KAAK,EAAE;oBAC1B,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,CAAC,CAAA;iBAC7B;gBACD,OAAO,GAAG,CAAC;aACd;YACD,OAAO,CAAC,CAAA;QACZ,CAAC;QAGD,cAAc;YACV,IAAI,UAAU,GAAG,IAAI,CAAC,eAAe,EAAE,KAAK,EAAE,CAAA;YAC9C,IAAI,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,CAAA;YAE5C,OAAO,UAAU,IAAI,cAAc,CAAA;QACvC,CAAC;QAED,OAAO;YACH,KAAK,IAAI,KAAK,IAAI,IAAI,CAAC,KAAK,EAAE;gBAC1B,IAAI,KAAK,KAAK,EAAE,EAAE;oBACd,OAAO,IAAI,CAAA;iBACd;aACJ;YACD,OAAO,KAAK,CAAA;QAChB,CAAC;QAED,SAAS;YACL,OAAO,IAAI,CAAC,cAAc,EAAE,GAAG,EAAE,CAAA;QACrC,CAAC;QAGD,eAAe,CAAE,YAAoB;YACjC,IAAI,UAAU,GAAG,IAAI,CAAC,eAAe,EAAE,GAAG,EAAE,CAAA;YAC5C,IAAI,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,IAAI,CAAC,CAAA;YAC3C,IAAI,yBAAyB,GAAG,YAAY,IAAI,IAAI,CAAC,GAAG,CAAA;YAExD,OAAO,UAAU,IAAI,cAAc,IAAI,yBAAyB,IAAI,IAAI,CAAC,SAAS,EAAE,CAAA;QACxF,CAAC;QAED,QAAQ;YACJ,OAAO,IAAI,CAAC,cAAc,EAAE,IAAI,EAAE,IAAI,IAAI,CAAC,SAAS,EAAE,CAAA;QAC1D,CAAC;QAED,SAAS;YACL,OAAO,CAAC,IAAI,CAAC,MAAM,CAAA;QACvB,CAAC;QAED,cAAc,CAAE,WAAiB,EAAE,YAAoB;YACnD,IAAI,YAAY,GAAG,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,KAAK,CAAA;YACtD,IAAI,iBAAiB,GAAG,IAAI,CAAC,SAAS,KAAK,CAAC,CAAA;YAC5C,IAAI,oBAAoB,GAAG,IAAI,CAAC,eAAe,EAAE,GAAG,EAAE,CAAA;YACtD,IAAI,wBAAwB,GAAG,CAAC,YAAY,GAAG,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,CAAA;YAEhE,OAAO,YAAY,IAAI,IAAI,CAAC,SAAS,EAAE,IAAI,iBAAiB,IAAI,oBAAoB,IAAI,wBAAwB,CAAA;QACpH,CAAC;QAED,UAAU,CAAE,QAAgB,EAAE,YAAoB;YAC9C,IAAI,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,KAAK,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAA;YACzE,IAAI,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,CAAA;YAC5C,IAAI,cAAc,GAAG,QAAQ,GAAG,CAAC,CAAA;YACjC,IAAI,oBAAoB,GAAG,YAAY,IAAI,IAAI,CAAC,GAAG,CAAA;YACnD,OAAO,aAAa,IAAI,cAAc,IAAI,cAAc,IAAI,oBAAoB,IAAI,IAAI,CAAC,SAAS,EAAE,CAAA;QACxG,CAAC;QAED,cAAc,CAAE,YAAoB;YAChC,IAAI,eAAe,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,CAAA;YAC7C,IAAI,gBAAgB,GAAG,IAAI,CAAC,SAAS,KAAK,CAAC,CAAA;YAC3C,IAAI,wBAAwB,GAAG,YAAY,IAAI,IAAI,CAAC,GAAG,GAAG,CAAC,CAAA;YAC3D,OAAO,eAAe,IAAI,IAAI,CAAC,SAAS,EAAE,IAAI,gBAAgB,IAAI,wBAAwB,CAAA;QAC9F,CAAC;QAED,aAAa;YACT,OAAO,IAAI,CAAC,SAAS,EAAE,IAAI,IAAI,CAAC,SAAS,EAAE,CAAA;QAC/C,CAAC;QAED,YAAY,CAAE,UAAgB;YAC1B,IAAI,WAAW,GAAG,UAAU,CAAC,eAAe,EAAE,CAAA;YAC9C,IAAI,WAAW,GAAG,IAAI,CAAC,eAAe,EAAE,CAAA;YAExC,IAAI,IAAI,CAAC,SAAS,KAAK,IAAI,EAAE;gBACzB,IAAI,CAAC,WAAW,GAAG,aAAa,CAAA;gBAChC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,GAAG,GAAG,CAAC,CAAA;aAC/B;iBAEI,IAAI,IAAI,CAAC,cAAc,EAAE,KAAK,IAAI,IAAI,UAAU,CAAC,cAAc,EAAE,KAAK,KAAK,EAAE;gBAC9E,IAAI,CAAC,WAAW,GAAG,6BAA6B,CAAA;gBAChD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAA;aAC9C;iBAEI,IAAI,UAAU,CAAC,cAAc,EAAE,KAAK,IAAI,EAAE;gBAC3C,IAAI,CAAC,WAAW,GAAG,6BAA6B,CAAA;gBAChD,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAA;aACpB;iBAEI,IAAI,WAAW,GAAG,EAAE,EAAE;gBACvB,IAAI,CAAC,WAAW,GAAG,aAAa,CAAA;gBAChC,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAA;aACpB;iBAEI,IAAI,WAAW,GAAG,EAAE,EAAE;gBACvB,IAAI,CAAC,WAAW,GAAG,aAAa,CAAA;gBAChC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,GAAG,GAAG,CAAC,CAAA;aAC/B;iBAEI,IAAI,WAAW,GAAG,WAAW,EAAE;gBAChC,IAAI,CAAC,WAAW,GAAG,aAAa,CAAA;gBAChC,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAA;aACpB;iBAEI,IAAI,WAAW,KAAK,WAAW,EAAE;gBAClC,IAAI,CAAC,WAAW,GAAG,0BAA0B,CAAA;gBAC7C,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAA;aAC3B;iBACI,IAAI,WAAW,GAAG,WAAW,EAAE;gBAChC,IAAI,CAAC,WAAW,GAAG,aAAa,CAAA;gBAChC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,GAAG,GAAG,CAAC,CAAA;aAC/B;QACL,CAAC;KAEJ;IAtMD,oBAsMC","sourcesContent":["import {Deck} from \"./Deck\"\r\nimport {Card} from \"./Card\"\r\n\r\nexport class Hand {\r\n    cards: Card[]\r\n    score: number[]\r\n    stayed: boolean\r\n    winningText: string\r\n    surrender: boolean\r\n    insurance: number\r\n    winnings: number\r\n\r\n\r\n    constructor (public bet: number, public index: number) {\r\n        this.cards = []\r\n        this.score = []\r\n        this.stayed = false\r\n        this.surrender = false\r\n        this.insurance = 0\r\n    }\r\n\r\n    addCardFromDeck (deck: Deck): Card {\r\n        let cardToAdd = deck.cards.pop()\r\n        this.cards.push(cardToAdd)\r\n        this.calculateScore()\r\n        return cardToAdd\r\n    }\r\n\r\n    addCardFromCard (cardToAdd: Card): Card {\r\n        this.cards.push(cardToAdd)\r\n        this.calculateScore()\r\n        return cardToAdd\r\n    }\r\n\r\n    private calculateScore () {\r\n        this.score = []\r\n        let baseScore = 0\r\n        let aces = 0\r\n        for (let card of this.cards) {\r\n            baseScore += card.getScore()\r\n            if (card.type === \"Ace\") {\r\n                aces++\r\n            }\r\n        }\r\n\r\n        this.score.push(baseScore)\r\n        while (aces-- > 0) {\r\n            baseScore += 10\r\n            if (baseScore <= 21) {\r\n                this.score.push(baseScore)\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    getScoreText () {\r\n        if (this.score.length > 0) {\r\n            let text = `${this.score[0]}`\r\n            for (let i = 1; i < this.score.length; i++) {\r\n                text += ` or ${this.score[i]}`\r\n            }\r\n            return text\r\n        }\r\n        else return \"0\"\r\n    }\r\n\r\n    getHighestScore (): number {\r\n        if (this.score.length > 0) {\r\n\r\n            let max = this.score[0]\r\n\r\n            for (let score of this.score) {\r\n                max = Math.max(max, score)\r\n            }\r\n            return max\r\n        }\r\n        return 0\r\n    }\r\n\r\n    getLowestScore (): number {\r\n        if (this.score.length > 0) {\r\n            let min = this.score[0]\r\n\r\n            for (let score of this.score) {\r\n                min = Math.min(min, score)\r\n            }\r\n            return min;\r\n        }\r\n        return 0\r\n    }\r\n\r\n\r\n    checkBlackjack (): boolean {\r\n        let scoreCheck = this.getHighestScore() === 21\r\n        let cardCountCheck = this.cards.length === 2\r\n\r\n        return scoreCheck && cardCountCheck\r\n    }\r\n\r\n    check21 (): boolean {\r\n        for (let score of this.score) {\r\n            if (score === 21) {\r\n                return true\r\n            }\r\n        }\r\n        return false\r\n    }\r\n\r\n    checkBust (): boolean {\r\n        return this.getLowestScore() > 21\r\n    }\r\n\r\n\r\n    checkDoubleDown (currentScore: number): boolean {\r\n        let scoreCheck = this.getHighestScore() < 11\r\n        let cardCountCheck = this.cards.length <= 2\r\n        let playerCanPayForDoubleDown = currentScore >= this.bet\r\n\r\n        return scoreCheck && cardCountCheck && playerCanPayForDoubleDown && this.checkStay()\r\n    }\r\n\r\n    checkHit () {\r\n        return this.getLowestScore() <= 21 && this.checkStay()\r\n    }\r\n\r\n    checkStay () {\r\n        return !this.stayed\r\n    }\r\n\r\n    checkInsurance (dealerCards: Hand, currentScore: number): boolean {\r\n        let dealerHasAce = dealerCards.cards[0].type === \"Ace\"\r\n        let notAlreadyInsured = this.insurance === 0\r\n        let playerHasNoBlackjack = this.getHighestScore() < 21\r\n        let playerCanPayForInsurance = (currentScore - this.bet / 2) > 0\r\n\r\n        return dealerHasAce && this.checkStay() && notAlreadyInsured && playerHasNoBlackjack && playerCanPayForInsurance\r\n    }\r\n\r\n    checkSplit (handsNum: number, currentScore: number): boolean {\r\n        let cardTypeCheck = this.cards[0].getScore() === this.cards[1].getScore()\r\n        let cardCountCheck = this.cards.length === 2\r\n        let handCountCheck = handsNum < 4\r\n        let playerCanPayForSplit = currentScore >= this.bet\r\n        return cardTypeCheck && cardCountCheck && handCountCheck && playerCanPayForSplit && this.checkStay()\r\n    }\r\n\r\n    checkSurrender (currentScore: number): boolean {\r\n        let cardLengthCheck = this.cards.length === 2\r\n        let noInsuranceCheck = this.insurance === 0\r\n        let playerCanPayForSurrender = currentScore >= this.bet / 2\r\n        return cardLengthCheck && this.checkStay() && noInsuranceCheck && playerCanPayForSurrender\r\n    }\r\n\r\n    checkTurnOver (): boolean {\r\n        return this.checkBust() || this.checkStay()\r\n    }\r\n\r\n    decideWinner (dealerHand: Hand) {\r\n        let dealerScore = dealerHand.getHighestScore()\r\n        let playerScore = this.getHighestScore()\r\n\r\n        if (this.surrender === true) {\r\n            this.winningText = \"Surrendered\"\r\n            this.winnings = this.bet / 2\r\n        }\r\n\r\n        else if (this.checkBlackjack() === true && dealerHand.checkBlackjack() === false) {\r\n            this.winningText = \"Player Wins by Blackjack :D\"\r\n            this.winnings = this.bet * 3 / 2 + this.bet\r\n        }\r\n\r\n        else if (dealerHand.checkBlackjack() === true) {\r\n            this.winningText = \"Dealer Wins by Blackjack :(\"\r\n            this.winnings = 0\r\n        }\r\n\r\n        else if (playerScore > 21) {\r\n            this.winningText = \"Dealer Wins\"\r\n            this.winnings = 0\r\n        }\r\n\r\n        else if (dealerScore > 21) {\r\n            this.winningText = \"Player Wins\"\r\n            this.winnings = this.bet * 2\r\n        }\r\n\r\n        else if (dealerScore > playerScore) {\r\n            this.winningText = \"Dealer Wins\"\r\n            this.winnings = 0\r\n        }\r\n\r\n        else if (dealerScore === playerScore) {\r\n            this.winningText = \"We'll call it a draw @_@\"\r\n            this.winnings = this.bet\r\n        }\r\n        else if (dealerScore < playerScore) {\r\n            this.winningText = \"Player Wins\"\r\n            this.winnings = this.bet * 2\r\n        }\r\n    }\r\n\r\n}\r\n"]}